\documentclass[a4paper, 10pt]{article}
\usepackage[unicode=true, colorlinks=true, linkcolor=blue, urlcolor=blue]{hyperref}
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
%\usepackage{indentfirst}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{geometry}
\usepackage{mathtools}
\usepackage{setspace}
\usepackage{tikz}
\usepackage{textcomp}
\usepackage{ stmaryrd }
\usepackage{ulem}
\usepackage{ dsfont }
\usepackage{tikzsymbols}
\usepackage{graphicx}
\usepackage{graphicx}
\graphicspath{{img/}}
\DeclareGraphicsExtensions{.pdf,.png,.jpg}

% Эта штука делает так, что у первого абзаца есть отступ. Почему-то по дефолту в техе все отступы начинаются со второго. Можешь закомментировать и посмотреть, что из этого получится
\usepackage{indentfirst}
\newcommand{\FF}{\mathcal{F}}
\newcommand{\RR}{\mathcal{R}}
\newcommand{\CC}{\mathcal{C}}
\newcommand{\MM}{\mathcal{M}}
\newcommand{\II}{\mathcal{I}}
\newcommand{\NN}{\mathcal{N}}

\geometry{a4paper,top=2cm,bottom=2cm,left=2cm,right=2cm}
\usepackage{hwspecial}

%$$\includegraphics{}$$

\title{Коллоквиум по дискретной математике 2}
\date{}
\begin{document}

\maketitle

\tableofcontents

\newpage

\section{Логика и машины Тьюринга}

\subsection{Структуры и сигнатуры. Нормальные структуры. Изоморфизм структур.}

Структура -- кортеж множеств $(M, \FF, \RR, \CC)$, где 
\begin{enumerate}
    \item $M$ -- непустое множество, \textit{носитель структуры}
    \item $\FF$ -- множество функций вида $f\colon M^n\to M$
    \item $\RR$ -- множество кортежей из $M$
    \item $\CC$ -- подмножество $M$
\end{enumerate}

Сигнатура -- кортеж попарно непересекающихся множеств $(Fnc,Prd,Cnst)$, где $Fnc$ -- множество функциональных символов, $Prd$ -- непустое множество предикатных символов и $Cnst$ -- множество константных символов. (просто набор символов)

*$\sigma$-структура (или интерпретация сигнатуры $\sigma$) -- это формально кортеж $\MM = (M,\FF,\RR,\CC,\II)$, где $\II(Fnc)=\FF,~\II(Prd)=\RR$ и $\II(Cnst)=\CC$. Вводим обозначения: $\II(Fnc)=f^\MM$, $\II(Prd)=R^\MM$ и $\II(Cnst)=c^\MM$. Для задания $\sigma$-структуры достаточно только $M$ и $\II$.

Нормальная структура -- содержащая двувалентный предикатный символ ``=`` $:=~\{(a, a) \in M^2~|~a \in M\}$, где $M$ -- носитель структуры.

% **Инъекция -- отображение такое, что из $f(x_1)=f(x_2)$ следует $x_1=x_2$.

Изоморфизм структур: интепретации $\MM$ и $\NN$ сигнатуры $\sigma$ с носителями $M$ и $N$ соответственно изоморфны если существует биекция $\eta \colon M \to N$ для которой выполняются следующие свойства:
\begin{enumerate}
    \item $\eta(f^\MM(a_1,\ldots,a_n))=f^\NN(\eta(a_1),\ldots,\eta(a_n))$
    \item $(a_1,\ldots,a_n)\in R^\MM \iff (\eta(a_1),\ldots,\eta(a_n))\in R^\NN$
    \item $\eta(c^\MM) = c^\NN$, где $c$ -- один символ
\end{enumerate}

\subsection{Формулы первого порядка данной сигнатуры. Параметры (свободные переменные)
формулы. Предложения.}

Формулы первого порядка -- это выражения в логике первого порядка (предикатной логике), построенные по правилам синтаксиса, установленным для данной сигнатуры.

Формулы первого порядка строятся из термов и предикатов, используя логические связки и кванторы. Основные элементы синтаксиса формул первого порядка:
\begin{enumerate}
    \item Термы: переменные, константы и функции, примененные к термам.
    \item Атомарные формулы: предикаты, примененные к термам.
    \item Сложные формулы: атомарные формулы, соединенные логическими операциями $(\lnot, \land, \lor, \to, \leftrightarrow)$ и кванторами $(\forall, \exists)$.
\end{enumerate}

Свободные переменные формулы -- это переменные, которые не находятся под действием кванторов ($\forall$ или $\exists$) внутри этой формулы. То есть, они не ''связаны'' кванторами и могут принимать любые значения из области определения. Множество свободных переменных в формуле $\varphi$ обозначается как $FV(\varphi)$.

Предложения в логике первого порядка -- это формулы, которые не содержат свободных переменных, то есть все переменные в них связаны кванторами. Такие формулы имеют логическое значение (истинность или ложность) в интерпретации.

\subsection{Оценка переменных. Значение терма и формулы в данной структуре при данной оценке. Независимость значения формулы от значений переменных, не являющихся ее параметрами.}

Оценка переменных -- способ присвоения конкретных значений переменным в формуле. По сути это функция $\mu$, которая ставит в соответствие \textit{каждой} переменной какое-то значение.

Значение терма $t$ и формулы $\varphi$ в данной структуре $\MM$ при данной оценке $\mu$: 
\begin{enumerate}
    \item если $t$ -- переменная, то $t$ принимает значение $\mu(t)$
    \item если $t$ -- константный символ $c$, то $t$ принимает значение интерпретации $c$ в $\MM$: $c^\MM$
    \item если $t$ -- функция $f$, применяемая к термам $t_1,\ldots,t_n$, то значение $t$ -- это $f^\MM(v_1,\ldots,v_n)$, где $v_1,\ldots,v_n$ -- это значения термов при данной оценке
    \item если $\varphi$ -- атомарная формула $P(t_1,\ldots,t_n)$, то она истинна, если $(v_1,\ldots,v_n)\in R^\MM$, где $v_1,\ldots,v_n$ -- это значения термов при данной оценке
    \item для сложных формул $\varphi$ используются стандартные логические правила
\end{enumerate}

Независимость значения формулы от значений переменных, не являющихся ее параметрами означает, что если мы изменим значения переменных, которые не являются свободными в данной формуле, то значение формулы останется неизменным. Другими словами, переменные, не являющиеся \textit{свободными} в формуле, не влияют на ее истинностное значение.

\subsection{Значение терма и формулы на наборе элементов структуры. Выразимые в структуре множества (отношения, функции, элементы). Примеры выразимых множеств.}

Значение терма или формулы $\alpha(x_1,\ldots,x_n)$ на наборе элементов $y=(y_1,\ldots,y_n)$ структуры $\MM$ определяется значением функции $\alpha^\MM(y)=[\alpha](\pi + (x_1\to y_1) + \ldots + (x_n\to y_n))$, где $\pi$ -- любая оценка.

\hfill

Выразимые в структуре $\MM$ множества -- это множества $D\subseteq\MM$, которые можно описать с помощью формул логики первого порядка

Примеры:
\begin{enumerate}
    \item пустое множество: $\varphi(x)=(x\not=x)$
    \item носитель структуры $\MM$: $\varphi(y)=(y=y)$
    \item четные числа: $\varphi(z)=\exists a (a\in\N \land a+a=z)$
\end{enumerate}

Выразимые в структуре предикаты -- это предикаты, для которых существуют эквивалентные формулы логики первого порядка

\subsection{Значение формулы при изоморфизме структур. Элементарная эквивалентность структур. Изоморфные структуры элементарно эквивалентны.}

*Если $\sigma$-предложение $\varphi$ истинно в $\MM$, то это обозначается так: $\MM\models\varphi$

*Теория в языке сигнатуры $\sigma$ -- это какое-то множество $\sigma$-предложений.

*Модель теории $T$ в языке сигнатуры $\sigma$ -- это такая $\sigma$-структура $\MM$, что все предложения в ней истинны.

*Модель предложения $\varphi$ в языке сигнатуры $\sigma$ -- это модель теории $\{\varphi\}$.

*Теория $\sigma$-структуры $\MM$ -- это все $\sigma$-предложения, истинные в $\MM$. Обозначение: $Th(\MM)$.

\hfill

Элементарная эквивалентность структур: $\sigma$-структуры $\MM$ и $\NN$ эквивалентны если $Th(\MM)=Th(\NN)$. Обозначение: $\MM\equiv\NN$

\hfill

Значение формулы $\varphi$ при изоморфизме $\eta$ структур $\MM$ и $\NN$: для любого $a \in M^n$ равносильны $\MM \models \varphi(a)$ и $\NN \models \varphi(\eta(a))$.

Элементарная эквивалентность изоморфных структур: изоморфные структуры элементарно эквивалентны.

TODO: дополнить доказательствами два последних утверждения

\subsection{Значение формулы при изоморфизме структур. Сохранение выразимых множеств автоморфизмами структуры. Примеры невыразимых множеств.}

Значение формулы $\varphi$ при изоморфизме $\eta$ структур $\MM$ и $\NN$: для любого $a \in M^n$ равносильны $\MM \models \varphi(a)$ и $\NN \models \varphi(\eta(a))$.

Сохранение выразимых множеств автоморфизмами структуры: семейство выразимых множеств сохраняется между автоморфизмами

Примеры невыразимых множеств: множество всех простых чисел (для этого необходимо проверять все возможные делители); множество натуральных чисел, являющихся степенью двойки (для этого требуется, например, рекурсия, которой нет).

TODO: дополнить доказательствами

% Эквивалентность формул первого порядка. [F, с. 4] Лемма о фиктивном кванторе. [F, 10] Общезначимые и выполнимые формулы. Квантор всеобщности и общезначимость. [F, 12]
\subsection{Эквивалентность формул первого порядка. Лемма о фиктивном кванторе. Общезначимые и выполнимые формулы. Квантор всеобщности и общезначимость.}

Эквивалентность формул первого порядка: формулы $\varphi$ и $\psi$ являются эквивалентными, если их значения совпадают в любой интерпретации при любой оценке. Обозначение $\varphi\equiv\psi$.

Лемма о фиктивном кванторе: пусть $x$ не лежит в множестве свободных переменных формулы $\varphi$, тогда $\varphi\equiv\forall x\varphi$

Общезначимая формула -- формула, истинная при любой интерпретации и оценке.

Выполнимая формула -- формула, для которой существует интерпретация и оценка, в которой она истинна.

Квантор всеобщности и общезначимость: формула $\varphi$ общезначима $\iff$ формула $\forall y\varphi$ общезначима

% Основные эквивалентности логики первого порядка [F, 24]. Замена подформулы на эквивалентную. [F, 26, 30]
\subsection{Основные эквивалентности логики первого порядка. Замена подформулы на эквивалентную.}

Основные эквивалентности логики первого порядка для произвольных $\varphi$ и $\psi$:

\begin{enumerate}
    \item Пусть $x$ не является параметром $\psi$, тогда $\forall\{\exists\} x (\varphi \land\{\lor\} \psi) \equiv \forall\{\exists\}x\varphi\land\{\lor\}\psi$ (итого 4 равенства)
    \item $\forall x (\varphi\land\psi) = \forall x\varphi \land \forall x\psi$
    \item $\forall x (\varphi\lor\psi) = \forall x\varphi \lor \forall x\psi$
    \item $\lnot\forall x\varphi \equiv \exists x \lnot \varphi$
    \item $\lnot\exists x\varphi \equiv \forall x \lnot \varphi$
\end{enumerate}

Пусть $\varphi$ -- какая-то формула, $\varphi\equiv\varphi'$, тогда замена $\varphi$ на $\varphi'$ эквивалентна в случаях использования логического и, или, не, импликации, "тогда и только тогда", квантора всеобщности и существования.

Замена подформулы на эквивалентную: пусть $\varphi\equiv\varphi'$ и $\psi'$ была получена путем замены вхождений $\varphi$ в $\psi$ на $\varphi'$, тогда $\psi\equiv\psi'$.

\subsection{Пропозциональные формулы и задаваемые ими булевы функции. Тавтологии первого порядка.}

Пропозициональная формула -- формула, построенная из пропозициональных переменных (простых букв) с помощью булевых связок.

Каждая пропозициональная формула задаёт булеву функцию, так как для каждого набора значений переменных (истина или ложь) формула принимает одно определённое значение (истина или ложь). То есть, если у вас есть пропозициональная формула $A$ с переменными $p$ и $q$, можно построить таблицу истинности, которая покажет значение формулы для всех возможных значений $p$ и $q$.

Тавтология -- это формула, истинная при любых значениях ее переменных. Любая тавтология общезначима.

% Лемма о корректной подстановке. [F, 73]
\subsection{Лемма о корректной подстановке.}

*Терм $t$ свободен для переменной $x$ в формуле $\varphi$, если при подстановке терма $t$ вместо переменной $x$ в формуле $\varphi$ не происходит никаких изменений значений других свободных переменных. Иными словами, терм $t$ можно подставить на место $x$ в $\varphi$ без появления новой привязки переменных, которая может изменить интерпретацию формулы. Обозначение: $t-x-\varphi$.

*Замена $y$ на $x$ в формуле $\varphi$ обозначается как $\varphi(y/x)$

Лемма о корректной подстановке: в любой интерпретации при любой оценке $\pi$ для всех $\varphi$ - формул, $t,s$ - термов, и $x$ - переменной, если $t-x-\varphi$, то выполняется:

$$ [s(t/x)](\pi) = [s](\pi + (x \to [t](\pi))) \text{ и } [\varphi(t/x)](\pi)=[\varphi](\pi + (x\to [t](\pi))) $$

TODO: доказательство

% Понятие корректной подстановки («терм свободен для переменной в формуле»). Пример некорректной подстановки. Лемма о корректной подстановке (без доказательства). [F, 73] Переименование связанной переменной. [F, 16, 18]. Общезначимость формул вида ∀xϕ → ϕ(t/x) и ϕ(t/x) → ∃xϕ в случае корректной подстановки. [F, 74]
\subsection{Понятие корректной подстановки («терм свободен для переменной в формуле»). Пример некорректной подстановки. Лемма о корректной подстановке (без доказательства). Переименование связанной переменной. Общезначимость формул вида $\forall x\varphi \to \varphi(t/x)$ и $\varphi(t/x) \to \exists x \varphi$ в случае корректной подстановки.}

см. билет 1.10

Пример некорректной подстановки: возьмем формулу $\varphi(x,y)=\forall y (P(x,y))$ и терм $t=y$. Подставляем: $\varphi(x/t,y)=\forall y (P(y,y))$. Смысл формулы изменен т.к. терм не свободен для переменной в формуле.

\hfill

Переименование связанной переменной:

Лемма 1. Пусть $y\not\in V(\varphi)$ (т.е. $y$ нет в $\varphi$), тогда $\forall x\varphi \equiv \forall y\varphi(y/x)$.

Лемма 2. Для любого терма $t$ и любой формулы $\varphi$, если $y \not\in V(\varphi)$, то для любой оценки $\pi$ верно: $[t(y/x)](\pi)=[t](\pi + (x \to \pi(y)))$ и $[\varphi(y/x)](\pi)=[\varphi](\pi + (x \to \pi(y)))$

\hfill

\begin{enumerate}
    \item $\forall x\varphi \to \varphi(t/x)$, если $t$ свободен для $x$ в $\varphi$
    \item $\varphi(t/x) \to \exists x \varphi(x)$, если $t$ свободен для $x$ в $\varphi$
\end{enumerate}

\hfill

TODO: дописать доказательства

% Переименование связанной переменной (без доказательства). [F, 16] Теорема о предваренной нормальной форме. [F, 36]
\subsection{Переименование связанной переменной (без доказательства). Теорема о предваренной нормальной форме.]}

Переименование связанной переменной:

Лемма 1. Пусть $y\not\in V(\varphi)$ (т.е. $y$ нет в $\varphi$), тогда $\forall x\varphi \equiv \forall y\varphi(y/x)$.

Лемма 2. Для любого терма $t$ и любой формулы $\varphi$, если $y \not\in V(\varphi)$, то для любой оценки $\pi$ верно: $[t(y/x)](\pi)=[t](\pi + (x \to \pi(y)))$ и $[\varphi(y/x)](\pi)=[\varphi](\pi + (x \to \pi(y)))$

\hfill

*Предваренная формула -- такая, что имеет кванторы только в кванторном префиксе в начале формулы.

Теорема о предваренной нормальной форме: для любой формулы найдется эквивалентная ей предваренная.

Доказательство: индукция по построению. Разберем все случаи:

\begin{enumerate}
    \item Если формула атомарная, то она уже предваренная.
    \item Если формула начинается с квантора, то по предположению индукции заменяем формулу под этим квантором на эквивалентную предваренную.
    \item Если формула начинается с отрицания, то по предположению индукции заменяем формулу под отрицанием на эквивалентную предваренную и проносим отрицание вовнутрь, переменяя кванторы.
    \item Если в формуле главная связка бинарная, то по предположению индукции заменяем формулы под связкой на эквивалентные предваренные и переименовываем связанные переменные так, чтобы все кванторы можно было вынести наружу и выносим их.
\end{enumerate}

\end{document}
